[gd_scene load_steps=4 format=3 uid="uid://qninm3x7ufc1"]

[ext_resource type="Texture2D" uid="uid://btkeplviwupbj" path="res://Assets/Textures/Player/GazParticle.png" id="2_3f4is"]
[ext_resource type="Texture2D" uid="uid://gjm4o67najft" path="res://Assets/Textures/Player/Gaz.png" id="2_6ymbd"]

[sub_resource type="CSharpScript" id="CSharpScript_2vov1"]
script/source = "using System.Diagnostics;
using Godot;

public partial class player_game_of_life_anim : Node
{
	[Export]
	float gol_timer = 1f;

	RandomNumberGenerator rng;

	// Called when the node enters the scene tree for the first time.
	public override void _Ready()
	{
        rng = new RandomNumberGenerator();

		GenerateGameOfLifePattern();
    }

	// Called every frame. 'delta' is the elapsed time since the previous frame.
	public override void _Process(double delta)
	{
		gol_timer -= (float)delta;

		if(gol_timer < 0f)
        {
            gol_timer = 1f;

            GenerateGameOfLifePattern();
		}
	}

	//Sets the cells sprites to be visible or not on a random basis
	public void GenerateGameOfLifePattern(){
        Debug.WriteLine(\"Changing pattern on player\");

		//FOR loop going from 1 to 6 for naming convention
        for (int i = 1; i < 7; i++){
			for(int j = 1; j < 7; j++){
				Node row = FindChild(\"AntiRow\" + i.ToString(), true);
				Node2D cell = (Node2D)row.FindChild(\"AntiCell\" + j.ToString(), false);

				cell.Visible = rng.Randf() > 0.6f;
			}
		}
	}
}
"

[node name="Node" type="Node"]

[node name="Player" type="Node2D" parent="."]
scale = Vector2(0.5, 0.5)
script = SubResource("CSharpScript_2vov1")
gol_timer = null

[node name="Gaz" type="Sprite2D" parent="Player"]
texture = ExtResource("2_6ymbd")

[node name="CPUParticles2D" type="CPUParticles2D" parent="Player"]
amount = 3
texture = ExtResource("2_3f4is")
emission_shape = 3
emission_rect_extents = Vector2(48, 48)
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_max = 50.0

[node name="Camera2D" type="Camera2D" parent="."]
